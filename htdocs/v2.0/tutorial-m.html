<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<link rel="stylesheet" type="text/css" href="general.css" />
<!-- TITLE --><title></title>
</head>

<body>
<!-- UPPER -->

<div class="window">
<div class="window-title">Plugin Tutorial</div>
<div class="window-content">
<p>
This tutorial explains how to create a little graphical Plugin for xpertmud.
You should start by 
<a href="/images/Tutorial/tutorial.tar.gz">downloading the source code.</a>
</p>
<p>
<img src="/images/Tutorial/Step1.png" /><br />
Start up QT Designer, select File->New and choose "C++ Project"
</p>
<p>
<img src="/images/Tutorial/Step2.png" /><br />
Set a Project Name.
</p>
<p>
<img src="/images/Tutorial/Step3.png" /><br />
Set the Template to "lib". 
Add the directory with kde-headers to Includepath.
</p>
<p>
<img src="/images/Tutorial/Step4.png" /><br />
Select File->new again, choose Widget.
</p>
<p>
<img src="/images/Tutorial/Step5.png" /><br />
Configure Name and Caption.
</p>
<p>
<img src="/images/Tutorial/Step6.png" /><br />
Resize the widget, add a Label, set its name to "CaptionLabel" and set a Text.
</p>
<p>
<img src="/images/Tutorial/Step7.png" /><br />
add a ProgressBar, set its name.
</p>
<p>
<img src="/images/Tutorial/Step8.png" /><br />
Layout the widgets. (Horizontal or Grid)
</p>
<p>
<img src="/images/Tutorial/Step9.png" /><br />
Time for the scripting interface.
Add this slot, it will be called by the perl/python part of the plugin.
</p>
<p>
<img src="/images/Tutorial/Step10.png" /><br />
This signal allows to call perl/python methods from your C++ code.
</p>
<p>
<img src="/images/Tutorial/Step11.png" /><br />
Time to write some code. This is all c++ code we really need to write for the plugin, the rest is just copy'n'paste.
</p>
<p>
<img src="/images/Tutorial/Step12.png" /><br />
Add some glue code required for KDE libraries. If you're compiling for windows(tm), use the header files found in the compat subdir of xpertmud.
</p>
<p>
now the plugin is complete. "qmake tutorial.pro" and "make".
</p>
<p>
<img src="/images/Tutorial/Step13.png" /><br />
Create a perl module for accessing the plugin.
</p>
<p>
<img src="/images/Tutorial/Step14.png" /><br />
Same for python.
</p>
<p>
<img src="/images/Tutorial/Step15.png" /><br />
create a .la file for the .so file. This file is usually generated by libtool,
we're using qmake, so we simply write it ourself. Only neccessary on linux.
</p>
<p>
install the plugin: (paths are relative to prefix of xpertmud)
<pre>
tutorial.so and tutorial.la -> lib/kde3/
Tutorial.pm -> share/apps/xpertmud/perl/
Tutorial.py -> share/apps/xpertmud/python/
</pre>
</p>
<p>
now all you need is a script using your plugin.
<pre>
my $healthbar=new Tutorial("Health:");
addTrigger('HEALTH','^Health: (\d+)/(\d+)',sub { ... 
   $healthbar-&gt;setMaxHealth(..);
   $healthbar-&gt;setHealth(..);
   ... });
</pre>
</p>
<p>
For more information about plugins, ask in the forum or 
on the xpertmud-devel mailing list.
</p>

</div>
</div>

<!-- LOWER -->
</body>
</html>
